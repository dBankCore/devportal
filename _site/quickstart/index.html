<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" >

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Cousine|Inconsolata" rel="stylesheet">
	<link rel="shortcut icon" type="image/png" href="/favicon.png">

	
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/css/fontawesome-all.min.css">
	<script src="/js/main.js"></script>
	

	<!-- Begin Jekyll SEO tag v2.1.0 -->
<title>Quickstart - dPay Developer</title>
<meta property="og:title" content="Quickstart" />
<meta name="description" content="dPay Developer Documentation." />
<meta property="og:description" content="dPay Developer Documentation." />
<link rel="canonical" href="http://localhost:5600/quickstart/" />
<meta property="og:url" content="http://localhost:5600/quickstart/" />
<meta property="og:site_name" content="dPay Developer" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "WebPage",
"headline": "Quickstart",
"description": "dPay Developer Documentation.",
"url": "http://localhost:5600/quickstart/"}</script>
<!-- End Jekyll SEO tag -->


	
</head>
<body>
<header>
	<h1>
		<button type="button" class="open-nav" id="open-nav"></button>
		<a href="/"  class="logo-link"><img src="/images/logotype_white.svg" height="40" alt="dPay Developer logo"></a>
	</h1>

	
	<form action="/search/" method="get">
		<input type="text" name="q" id="search-input" placeholder="Search">
		<input type="submit" value="Search" style="display: none;">
	</form>
	

	<div id="sidebar" class="sidebar">
	
	
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/">
		<h6 class="ctrl-nav-section title">Introduction</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/#introduction-welcome">Welcome to dPay</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/quickstart/">
		<h6 class="ctrl-nav-section title">Quickstart</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/quickstart/#quickstart-choose-library">Choose Library</a></li>
						
					
						
						<li><a href="/quickstart/#quickstart-dpayd-nodes">dpayd Nodes</a></li>
						
					
						
						<li><a href="/quickstart/#quickstart-testnet">dPay Testnet</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/tutorials/">
		<h6 class="ctrl-nav-section title">Tutorials</h6>
		<ul class="cont-nav-section content">
			
				
					
						<li><a href="/tutorials/#tutorials-javascript">Javascript</a></li>
					
				
					
						<li><a href="/tutorials/#tutorials-python">Python</a></li>
					
				
					
						<li><a href="/tutorials/#tutorials-ruby">Ruby</a></li>
					
				
					
						<li><a href="/tutorials/#tutorials-recipes">Recipes</a></li>
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/services/">
		<h6 class="ctrl-nav-section title">Services</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/services/#services-dsite">dSite.io</a></li>
						
					
						
						<li><a href="/services/#services-dpayid">dPayID</a></li>
						
					
						
						<li><a href="/services/#services-jefferson">Jefferson</a></li>
						
					
						
						<li><a href="/services/#services-dsiteimages">ImageHoster</a></li>
						
					
						
						<li><a href="/services/#services-dpds">DPDS</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/apidefinitions/">
		<h6 class="ctrl-nav-section title">Appbase API</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/apidefinitions/#apidefinitions-condenser-api">Condenser Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-account-by-key-api">Account By Key Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-broadcast-ops-comment">Broadcast Ops Comment</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-account-history-api">Account History Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-database-api">Database Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-follow-api">Follow Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-jsonrpc">Jsonrpc</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-market-history-api">Market History Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-network-broadcast-api">Network Broadcast Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-tags-api">Tags Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-witness-api">Witness Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-block-api">Block Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-broadcast-ops">Broadcast Ops</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/community/">
		<h6 class="ctrl-nav-section title">Community</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/community/#community-overview">Overview</a></li>
						
					
						
						<li><a href="/community/#community-resources">Resources</a></li>
						
					
						
						<li><a href="/community/#community-dpaypython">dPay-Python</a></li>
						
					
						
						<li><a href="/community/#community-developeradvocate">Sharing & Help</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/glossary/">
		<h6 class="ctrl-nav-section title">Glossary</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/glossary/#glossary-chain-basics">Chain Basics</a></li>
						
					
						
					
						
						<li><a href="/glossary/#glossary-governance">Governance</a></li>
						
					
						
						<li><a href="/glossary/#glossary-transactions">Transactions</a></li>
						
					
						
						<li><a href="/glossary/#glossary-api">API</a></li>
						
					
						
						<li><a href="/glossary/#glossary-market">Market</a></li>
						
					
				
			
		</ul>
	</section>
	
</div>


	<!--<p class="copyright">-->
	<!--<a href="https://dsite.io/">-->
	<!--dsite-->
	<!--</a>-->
	<!--</p>-->
	<link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet">
</header>
<div class="main" id="top">
	<div class="hero">
		<h1 class="hero__h1">dPay Developer Portal  - Quickstart</h1>
		
		<img class="hero__img" src="/images/hero.png">
		
	</div>
	

	
	
		<section id="quickstart-choose-library" class="row quickstart-choose-library">
			<h3>
				<a id="quickstart-choose-library">
					Choose Library
					
				</a>
			</h3>
			

			<p>Getting started to develop robust and feature rich <strong>dPay</strong> applications couldnâ€™t be easier. Accessing dPay data is easy from various options depending on your infrastructure and objectives.</p>

<p>Building a picture discovery app is a breeze with the <a href="/tutorials/#tutorials-javascript">JavaScript</a> library. There is also a <a href="/tutorials/#tutorials-python">Python</a> library available, <a href="/services/#services-dsite">dSite.io</a> and <a href="/services/#services-dpds">DPDS</a> services, as well as many <a href="/community/#community-overview">community projects</a> which could be beneficial for your dPay project.</p>

		</section>
	
		<section id="quickstart-dpayd-nodes" class="row quickstart-dpayd-nodes">
			<h3>
				<a id="quickstart-dpayd-nodes">
					dpayd Nodes
					
				</a>
			</h3>
			

			<p>Applications that interface directly with the dPay blockchain will need to connect to a <code class="highlighter-rouge">dpayd</code> node. Developers may choose to use one of the public API nodes that are available, or run their own instance of a node.</p>

<h3 id="public-nodes">Public Nodes</h3>

<table>
  <thead>
    <tr>
      <th>URL</th>
      <th>Owner</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>d.dsite.io</td>
      <td>@dweb</td>
    </tr>
    <tr>
      <td>d.dpays.io</td>
      <td>@dpay</td>
    </tr>
    <tr>
      <td>dpayd.dpays.io</td>
      <td>@dpay</td>
    </tr>
    <tr>
      <td>d.dpays.io</td>
      <td>@dpay</td>
    </tr>
    <tr>
      <td>dpay.mbex.link</td>
      <td>@mbex</td>
    </tr>
    <tr>
      <td>dpaystan.link</td>
      <td>@stan</td>
    </tr>
    <tr>
      <td>dpay.michaelx.link</td>
      <td>@michaelx</td>
    </tr>
    <tr>
      <td>dpay.nomoreheroes.link</td>
      <td>@nomoreheroes</td>
    </tr>
    <tr>
      <td>dpay.indominon.com</td>
      <td>@onceuponatime</td>
    </tr>
    <tr>
      <td>freedomfirst.dpays.io</td>
      <td>@freedomfirst</td>
    </tr>
    <tr>
      <td>jefferson.dpays.io</td>
      <td>@jared</td>
    </tr>
    <tr>
      <td>jackson.dpays.io</td>
      <td>@nickeles</td>
    </tr>
    <tr>
      <td>dpay.tablecafe.link</td>
      <td>@tablecafe</td>
    </tr>
  </tbody>
</table>

<h3 id="private-nodes">Private Nodes</h3>

<p>The simplest way to get started is by deploying a pre-built dockerized container.</p>

<h5 id="dockerized-p2p-node">Dockerized p2p Node</h5>

<p><em>To run a p2p node (ca. 2GB of memory is required at the moment):</em></p>

<h5 id="dockerized-full-node">Dockerized Full Node</h5>

<p><em>to run a node with all the data (e.g. for supporting a content website) that uses ca. 14GB of memory and growing:</em></p>

<h3 id="syncing-blockchain">Syncing blockchain</h3>

<p>Normally syncing blockchain starts from very first, <code class="highlighter-rouge">0</code> genesis block. It might take long time to catch up with live network. Because it connectes to various p2p nodes in the dPay network and requests blocks from 0 to head block. It stores blocks in block log file and builds up the current state in the shared memory file. But there is a way to bootstrap syncing by using trusted <code class="highlighter-rouge">block_log</code> file. The block log is an external append only log of the blocks. It contains blocks that are only added to the log after they are irreversible because the log is append only.</p>

<p>Trusted block log file helps to download blocks faster. dPay DAO, provides public block log file which can be downloaded from <a href="https://s3.amazonaws.com/dpay-dev-blockchainstate/block_log-latest">here</a> and there is also option from community witness <code class="highlighter-rouge">@stan</code> which can be downloaded from <a href="https://dpaystan.link/get/blockchain/">here</a>.</p>

<p>Both <code class="highlighter-rouge">block_log</code> files updated periodically, as of May 2018 uncompressed <code class="highlighter-rouge">block_log</code> file size ~110 GB. Docker container on <code class="highlighter-rouge">stable</code> branch of dPay source code has option to use <code class="highlighter-rouge">USE_PUBLIC_BLOCKLOG=1</code> to download latest block log and start dPay node with replay.</p>

<p>Block log should be place in <code class="highlighter-rouge">blockchain</code> directory below <code class="highlighter-rouge">data_dir</code> and node should be started with <code class="highlighter-rouge">--replay-blockchain</code> to ensure block log is valid and continue to sync from the point of snapshot. Replay uses the downloaded block log file to build up the shared memory file up to the highest block stored in that snapshot and then continues with sync up to the head block.</p>

<p>Replay helps to sync blockchain in much faster rate, but as blockchain grows in size replay might also take some time to verify blocks.</p>

<p>There is another <a href="https://github.com/dpays/dpay/issues/2391">trick which might help</a> with faster sync/replay on smaller equipped servers:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>while :
do
   dd if=blockchain/block_log iflag=nocache count=0
   sleep 60
done
</code></pre>
</div>

<p>Above bash script drops <code class="highlighter-rouge">block_log</code> from the OS cache, leaving more memory free for backing the blockchain database. It might also help while running live, but measurement would be needed to determine this.</p>

<h5 id="few-other-tricks-that-might-help">Few other tricks that might help:</h5>

<p>For Linux users, virtual memory writes dirty pages of the shared file out to disk more often than is optimal which results in dpayd being slowed down by redundant IO operations. These settings are recommended to optimize reindex time.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>echo    75 | sudo tee /proc/sys/vm/dirty_background_ratio
echo  1000 | sudo tee /proc/sys/vm/dirty_expire_centisecs
echo    80 | sudo tee /proc/sys/vm/dirty_ratio
echo 30000 | sudo tee /proc/sys/vm/dirty_writeback_centisecs
</code></pre>
</div>

<p>Another settings that can be changed in <code class="highlighter-rouge">config.ini</code> is <code class="highlighter-rouge">flush</code> - it is to specify a target number of blocks to process before flushing the chain database to disk. This is needed on Linux machines and a value of 100000 is recommended. It is not needed on OS X, but can be used if desired.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>docker run <span class="se">\</span>
    -d -p 6620:6620 -p 1776:1776 --name dpayd-default <span class="se">\</span>
    dpay/dpay

docker logs -f dpayd-default  <span class="c"># follow along</span>
</code></pre>
</div>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>docker run <span class="se">\</span>
    --env <span class="nv">USE_WAY_TOO_MUCH_RAM</span><span class="o">=</span>1 <span class="se">\</span>
    -d -p 6620:6620 -p 1776:1776 --name dpayd-full <span class="se">\</span>
    dpay/dpay

docker logs -f dpayd-full
</code></pre>
</div>

		</section>
	
		<section id="quickstart-testnet" class="row quickstart-testnet">
			<h3>
				<a id="quickstart-testnet">
					dPay Testnet
					
				</a>
			</h3>
			

			<p>dPay blockchain software is written in C++ and in order to modify the source code you need some understanding of the C++ programming language. Each dPay node runs an instance of this software, so in order to test your changes, you will need to know how to install dependencies which can be found in the <a href="https://github.com/dpays/dpay/blob/master/doc/building.md">dPay repo</a>. This also means that some knowledge of System administration is also required. There are multiple advantages of running a testnet, you can test your scripts or applications on a testnet without extra spam on the live network, which allows much more flexibility to try new things. Having access to a testnet also helps you to work on new features and possibly submit new or improved pull requests to official the dPay GitHub repository.</p>

<h2 id="dpays-testnet">dPayâ€™s Testnet</h2>

<p>dPay maintains a live testnet to which you can connect. In the near future, we expect the chain id to update with every code change. To get the current chain id for any HF20+ dPay testnet you can use the <a href="/apidefinitions/#database_api.get_version">database_api.get_version</a> api call (curl example included for your convenience). Be sure to point it at an api node on the testnet for which you want information!</p>

<p>At the time of this writing, the connection information for dPayâ€™s testnet is as follows:</p>

<ul>
  <li>ChainID: <code class="highlighter-rouge">46d82ab7d8db682eb1959aed0ada039a6d49afa1602491f93dde9cac3e8e6c32</code></li>
  <li>Address prefix: <code class="highlighter-rouge">DWT</code></li>
  <li>API node: <code class="highlighter-rouge">https://testnet.dpays.io</code></li>
</ul>

<h2 id="running-a-testnet-node">Running a Testnet Node</h2>

<p>First, letâ€™s build <code class="highlighter-rouge">dpayd</code> specifically for testnet.  Recommended specs:</p>

<ul>
  <li><code class="highlighter-rouge">Ubuntu Server 16.04 LTS</code></li>
  <li><code class="highlighter-rouge">100GB HDD</code></li>
  <li><code class="highlighter-rouge">16GB RAM</code> (mostly needed for <code class="highlighter-rouge">dpayd</code> build)</li>
</ul>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get dist-upgrade
sudo reboot

sudo apt-get install autoconf automake autotools-dev bsdmainutils build-essential cmake doxygen <span class="se">\</span>
   git libboost-all-dev libreadline-dev libssl-dev libtool ncurses-dev pbzip2 pkg-config <span class="se">\</span>
   python3-dev python3-jinja2 python3-pip libbz2-dev libsnappy-dev<span class="se">\</span>
   wget curl screen pv virtualenv nano xz-utils
mkdir -p src
<span class="nb">cd </span>src
git clone https://github.com/dpays/dpay
<span class="nb">cd </span>dpay
git checkout &lt;20180824-testnet OR develop OR a more current branch&gt;
git submodule update --init --recursive
mkdir -p build
<span class="nb">cd </span>build
cmake <span class="se">\</span>
   -DCMAKE_BUILD_TYPE<span class="o">=</span>Release <span class="se">\</span>
   -DBUILD_DPAY_TESTNET<span class="o">=</span>ON <span class="se">\</span>
   -DENABLE_SMT_SUPPORT<span class="o">=</span>ON <span class="se">\</span>
   -DLOW_MEMORY_NODE<span class="o">=</span>ON <span class="se">\</span>
   -DCHAINBASE_CHECK_LOCKING<span class="o">=</span>ON <span class="se">\</span>
   -DCLEAR_VOTES<span class="o">=</span>ON <span class="se">\</span>
   -DSKIP_BY_TX_ID<span class="o">=</span>ON <span class="se">\</span>
   -DDPAY_LINT_LEVEL<span class="o">=</span>OFF <span class="se">\</span>
   ..
make -j<span class="k">$(</span>nproc<span class="k">)</span> install
<span class="nb">cd
</span>mkdir -p testnet-data
nano config.ini
</code></pre>
</div>

<h3 id="configini"><code class="highlighter-rouge">config.ini</code></h3>

<div class="language-ini highlighter-rouge"><pre class="highlight"><code><span class="py">log-console-appender</span> <span class="p">=</span> <span class="s">{"appender":"stderr","stream":"std_error"}</span>
<span class="py">log-file-appender</span> <span class="p">=</span> <span class="s">{"appender":"p2p","file":"logs/p2p/p2p.log"}</span>
<span class="py">log-logger</span> <span class="p">=</span> <span class="s">{"name":"default","level":"info","appender":"stderr"}</span>
<span class="py">log-logger</span> <span class="p">=</span> <span class="s">{"name":"p2p","level":"warn","appender":"p2p"}</span>

<span class="py">backtrace</span> <span class="p">=</span> <span class="s">yes</span>
<span class="py">plugin</span> <span class="p">=</span> <span class="s">chain p2p webserver witness database_api network_broadcast_api block_api</span>

<span class="py">shared-file-dir</span> <span class="p">=</span> <span class="s">"blockchain"</span>
<span class="py">shared-file-size</span> <span class="p">=</span> <span class="s">12G</span>
<span class="py">p2p-endpoint</span> <span class="p">=</span> <span class="s">0.0.0.0:6620</span>
<span class="py">webserver-http-endpoint</span> <span class="p">=</span> <span class="s">0.0.0.0:8751</span>
<span class="py">webserver-ws-endpoint</span> <span class="p">=</span> <span class="s">0.0.0.0:8752</span>

<span class="c"># testnet.dpays.io
</span><span class="py">p2p-seed-node</span> <span class="p">=</span> <span class="s">testnet.dpays.io:6620</span>
</code></pre>
</div>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>dpayd --data-dir<span class="o">=</span>. --chain-id<span class="o">=</span>46d82ab7d8db682eb1959aed0ada039a6d49afa1602491f93dde9cac3e8e6c32
</code></pre>
</div>

<p>Now let it sync, and youâ€™ll have a shiny new testnet seed node to play with.</p>

<h2 id="custom-testnet">Custom Testnet</h2>

<p>In order to create a custom, isolated, testnet separate from the dPayâ€™s we need to modify a few things mentioned in the previous section.</p>

<p>In the file named <code class="highlighter-rouge">dpay/libraries/protocol/include/dpay/protocol/config.hpp</code>, we can see the first few lines dedicated to the Testnet section. The line starts with <code class="highlighter-rouge">#ifdef IS_TEST_NET</code>.</p>

<p>Letâ€™s say we want to create a custom testnet with an initial supply of <strong>1,000,000 BEX</strong>. We can change <code class="highlighter-rouge">DPAY_INIT_SUPPLY 1,000,000</code> and by changing <code class="highlighter-rouge">DPAY_CHAIN_ID_NAME "testnet"</code>, <strong>testnet</strong> to <strong>mytestnet</strong> we will automatically get a unique Chain ID for our testnet. The address prefix can be set to something like <strong>MTN</strong> and of course, we need to change the public and private keys to the genesis account. Note that the genesis account will receive the entire pre-mined supply of 1,000,000. That way, you can execute a setup script to fund any newly created accounts. Such a custom testnet will not have any additional hardware requirements to run.</p>

<p>A minimum of 8GB RAM should be sufficient to run a custom testnet. Currently, dPay only has Linux and Mac compiling guides to build. A testnet can either be hosted locally, on a rented AWS, or dedicated bare metal servers so one can start testing functionality, explore different APIs, and start developing.</p>

<p>One more crucial point to modify is to change the number of witnesses required to accept hardforks for a custom testnet, by default it is set to 17, we can change it to <strong>1</strong> <code class="highlighter-rouge">DPAY_HARDFORK_REQUIRED_WITNESSES 1</code> so that only one node instance would be sufficient and the network will be still functional and fast.</p>

<p>Another thing to note is that you can start a new chain with all previous hardforks already accepted, by changing the file named <code class="highlighter-rouge">dpay/blob/master/libraries/chain/database.cpp</code> with the following function:</p>

<p><code class="highlighter-rouge">void database::init_genesis( uint64_t init_supply )</code> inside <code class="highlighter-rouge">try</code> add this line:</p>

<p><code class="highlighter-rouge">set_hardfork( 19, true );</code></p>

<p>This would mean that 19 hardforks have been accepted by witnesses and the new chain will start with all previous forks included.</p>

<p>After these changes, all we have to do is compile the source code and get the <code class="highlighter-rouge">dpayd</code> executable. And once we fire up the custom testnet we can start testing and experimenting.</p>

<p>If you want to port some data from dPay main network you can use <a href="https://github.com/dpays/tinman">Tinman</a>, also developed by dPay, to help with taking snapshots of the main network.</p>

<h4 id="custom-live-testnet">Custom Live TestNet</h4>

<p>An example of a custom testnet run by dPay community member <a href="https://dsite.io/@almost-digital">@almost-digital</a>. It doesnâ€™t have a snapshot of the main network</p>

<ul>
  <li>ChainID: <code class="highlighter-rouge">79276aea5d4877d9a25892eaa01b0adf019d3e5cb12a97478df3298ccdd01673</code></li>
  <li>Address prefix: <code class="highlighter-rouge">DWT</code></li>
  <li>API node: <code class="highlighter-rouge">https://testnet.dpays.io</code></li>
</ul>

		</section>
	


</div>
<div class="footer">
	<a href="#">Back to top</a>
</div>
<script>
    document.getElementById("open-nav").addEventListener("click", function () {
        document.body.classList.toggle("nav-open");
    });
</script>
</body>
</html>


<script src="/js/adjust.js"></script>

