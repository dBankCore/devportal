<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" >

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Cousine|Inconsolata" rel="stylesheet">
	<link rel="shortcut icon" type="image/png" href="/favicon.png">

	
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/css/fontawesome-all.min.css">
	<script src="/js/main.js"></script>
	

	<!-- Begin Jekyll SEO tag v2.1.0 -->
<title>JS: Transfer BEX And BBD - dPay Developer</title>
<meta property="og:title" content="JS: Transfer BEX And BBD" />
<meta name="description" content="Transfer both BEX and BBD from one account to another." />
<meta property="og:description" content="Transfer both BEX and BBD from one account to another." />
<link rel="canonical" href="http://localhost:5600/tutorials-javascript/transfer_bex_and_bbd" />
<meta property="og:url" content="http://localhost:5600/tutorials-javascript/transfer_bex_and_bbd" />
<meta property="og:site_name" content="dPay Developer" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-09-11T21:06:28-05:00" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "JS: Transfer BEX And BBD",
"datePublished": "2018-09-11T21:06:28-05:00",
"description": "Transfer both BEX and BBD from one account to another.",
"url": "http://localhost:5600/tutorials-javascript/transfer_bex_and_bbd"}</script>
<!-- End Jekyll SEO tag -->


	
</head>
<body>
<header>
	<h1>
		<button type="button" class="open-nav" id="open-nav"></button>
		<a href="/"  class="logo-link"><img src="/images/logotype_white.svg" height="40" alt="dPay Developer logo"></a>
	</h1>

	
	<form action="/search/" method="get">
		<input type="text" name="q" id="search-input" placeholder="Search">
		<input type="submit" value="Search" style="display: none;">
	</form>
	

	<div id="sidebar" class="sidebar">
	
	
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/">
		<h6 class="ctrl-nav-section title">Introduction</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/#introduction-welcome">Welcome to dPay</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/quickstart/">
		<h6 class="ctrl-nav-section title">Quickstart</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/quickstart/#quickstart-choose-library">Choose Library</a></li>
						
					
						
						<li><a href="/quickstart/#quickstart-dpayd-nodes">dpayd Nodes</a></li>
						
					
						
						<li><a href="/quickstart/#quickstart-testnet">dPay Testnet</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/tutorials/">
		<h6 class="ctrl-nav-section title">Tutorials</h6>
		<ul class="cont-nav-section content">
			
				
					
						<li><a href="/tutorials/#tutorials-javascript">Javascript</a></li>
					
				
					
						<li><a href="/tutorials/#tutorials-python">Python</a></li>
					
				
					
						<li><a href="/tutorials/#tutorials-ruby">Ruby</a></li>
					
				
					
						<li><a href="/tutorials/#tutorials-recipes">Recipes</a></li>
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/services/">
		<h6 class="ctrl-nav-section title">Services</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/services/#services-dsite">dSite.io</a></li>
						
					
						
						<li><a href="/services/#services-dpayid">dPayID</a></li>
						
					
						
						<li><a href="/services/#services-jefferson">Jefferson</a></li>
						
					
						
						<li><a href="/services/#services-dsiteimages">ImageHoster</a></li>
						
					
						
						<li><a href="/services/#services-dpds">DPDS</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/apidefinitions/">
		<h6 class="ctrl-nav-section title">Appbase API</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/apidefinitions/#apidefinitions-condenser-api">Condenser Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-account-by-key-api">Account By Key Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-broadcast-ops-comment">Broadcast Ops Comment</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-account-history-api">Account History Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-database-api">Database Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-follow-api">Follow Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-jsonrpc">Jsonrpc</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-market-history-api">Market History Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-network-broadcast-api">Network Broadcast Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-tags-api">Tags Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-witness-api">Witness Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-block-api">Block Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-broadcast-ops">Broadcast Ops</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/community/">
		<h6 class="ctrl-nav-section title">Community</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/community/#community-overview">Overview</a></li>
						
					
						
						<li><a href="/community/#community-resources">Resources</a></li>
						
					
						
						<li><a href="/community/#community-dpaypython">dPay-Python</a></li>
						
					
						
						<li><a href="/community/#community-developeradvocate">Sharing & Help</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/glossary/">
		<h6 class="ctrl-nav-section title">Glossary</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/glossary/#glossary-chain-basics">Chain Basics</a></li>
						
					
						
					
						
						<li><a href="/glossary/#glossary-governance">Governance</a></li>
						
					
						
						<li><a href="/glossary/#glossary-transactions">Transactions</a></li>
						
					
						
						<li><a href="/glossary/#glossary-api">API</a></li>
						
					
						
						<li><a href="/glossary/#glossary-market">Market</a></li>
						
					
				
			
		</ul>
	</section>
	
</div>


	<!--<p class="copyright">-->
	<!--<a href="https://dsite.io/">-->
	<!--dsite-->
	<!--</a>-->
	<!--</p>-->
	<link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet">
</header>
<div class="main" id="top">
	<div class="hero">
		<h1 class="hero__h1">dPay Developer Portal </h1>
		
		<img class="hero__img" src="/images/hero.png">
		
	</div>
	<section id="tutorials-javascript-transfer-bex-and-bbd" class="row tutorials-javascript-transfer-bex-and-bbd">
	<h3>
		<a id="tutorials-javascript-transfer-bex-and-bbd">
			JS: Transfer BEX And BBD
			
		</a>
	</h3>
	
		<span class="description"><p><em>Transfer both BEX and BBD from one account to another.</em></p>
</span>
	

	<p><span class="fa-pull-left top-of-tutorial-repo-link"><span class="first-word">Full</span>, runnable src of <a href="https://github.com/dpays/developer-docs-tutorials-js/tree/master/tutorials/21_transfer_dpay_and_bbd">Transfer BEX And BBD</a> can be downloaded as part of the <a href="https://github.com/dpays/developer-docs-tutorials-js">JS tutorials repository</a>.</span>
<br /></p>

<p>This tutorial will take you through the process of preparing and submitting a <code class="highlighter-rouge">transfer</code> using the <code class="highlighter-rouge">broadcast</code> operation. Two demo accounts are provided to use on the <code class="highlighter-rouge">testnet</code> but all variables can be easily changed and applied to the <code class="highlighter-rouge">production server</code>.</p>

<p>There is also an alternative method to transfer from one account to another using a <code class="highlighter-rouge">hot signing</code> link that can be generated via <a href="https://dpayid.io/sign/">dPayID</a>. You create a link using the <code class="highlighter-rouge">to</code> account, the amount, and a <code class="highlighter-rouge">memo</code> (optional comments). This <a href="https://dpayid.io/sign/transfer?to=dsiteblog&amp;amount=1.000%20BEX">link</a> then allows you to do a transfer simply by adding the login details of the <code class="highlighter-rouge">from</code> account. This is a very simple way to send a payment request to any other user with the correct details already provided by the link.</p>

<h2 id="intro">Intro</h2>

<p>We are using the <code class="highlighter-rouge">broadcast.transfer</code> function provided by the <code class="highlighter-rouge">ddpays</code> library to send the transaction through to the network. In order to do the transfer, two accounts are required. One the sender and the other the recipient. You also can’t transfer from and to the same account, which is why two accounts have been provided for this tutorial. There are 6 parameters required for the transfer operation:</p>

<ol>
  <li><em>Username</em> - The username of the account making the transfer (<code class="highlighter-rouge">from</code> account)</li>
  <li><em>Privatekey</em> - This is the private <code class="highlighter-rouge">active</code> key of the sender</li>
  <li><em>Recipient</em> - The account that is receiving the BEX or BBD (<code class="highlighter-rouge">to</code> account)</li>
  <li><em>Memo</em> - This is a text field which can be used for a comment on the transfer or it can be left empty</li>
  <li><em>Amount</em> - This is the amount of BEX to transfer. This has to be a positive value with 3 decimals in order for the transaction to be completed</li>
  <li><em>Type</em> - This is the currency of the transfer, BEX or BBD. This value has to be written ALL CAPS in order for the transaction to be completed</li>
</ol>

<p>It is noteworthy that BEX Power (VESTS) cannot be transferred with this operation.</p>

<h2 id="steps">Steps</h2>

<ol>
  <li><a href="#connection"><strong>Configure connection</strong></a> Configuration of <code class="highlighter-rouge">ddpays</code> to communicate with a dPay blockchain</li>
  <li><a href="#input"><strong>Input variables</strong></a> Collecting the required inputs via an HTML UI</li>
  <li><a href="#object"><strong>Object creation</strong></a> Creating an object to use in the broadcast operation</li>
  <li><a href="#broadcast"><strong>Broadcast</strong></a> Broadcasting the transfer to the blockchain</li>
</ol>

<h4 id="1-configure-connection">1. Configure connection<a name="connection"></a></h4>

<p>As usual, we have a <code class="highlighter-rouge">public/app.js</code> file which holds the Javascript segment of the tutorial. In the first few lines we define the configured library and packages:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">ddpays</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'ddpays'</span><span class="p">);</span>
<span class="c1">//define network parameters</span>
<span class="kd">let</span> <span class="nx">opts</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">opts</span><span class="p">.</span><span class="nx">addressPrefix</span> <span class="o">=</span> <span class="s1">'DWT'</span><span class="p">;</span>
<span class="nx">opts</span><span class="p">.</span><span class="nx">chainId</span> <span class="o">=</span>
    <span class="s1">'79276aea5d4877d9a25892eaa01b0adf019d3e5cb12a97478df3298ccdd01673'</span><span class="p">;</span>
<span class="c1">//connect to a dPay node, testnet in this case</span>
<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ddpays</span><span class="p">.</span><span class="nx">Client</span><span class="p">(</span><span class="s1">'https://testnet.dpays.io'</span><span class="p">,</span> <span class="nx">opts</span><span class="p">);</span>
</code></pre>
</div>

<p>Above, we have <code class="highlighter-rouge">ddpays</code> pointing to the test network with the proper chainId, addressPrefix, and endpoint.<br />
Because this tutorial modifies the blockchain, we will use a testnet and predefined accounts to demonstrate the transfer process.</p>

<h4 id="2-input-variables">2. Input variables<a name="input"></a></h4>

<p>The required parameters for the transfer operation is recorded via an HTML UI that can be found in the <code class="highlighter-rouge">public/index.html</code> file. The values are prepopulated in this case with testnet <code class="highlighter-rouge">demo</code> accounts. The transfer amount is set to <code class="highlighter-rouge">1.000</code> but any value can be input as long as the sender has enough BEX to send.</p>

<p>The parameter values are allocated as seen below, once the user clicks on the “Transfer” button.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nb">window</span><span class="p">.</span><span class="nx">submitTransfer</span> <span class="o">=</span> <span class="nx">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">//get all values from the UI</span>
    <span class="c1">//get account name of sender</span>
    <span class="kr">const</span> <span class="nx">username</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'username'</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
    <span class="c1">//get private active key</span>
    <span class="kr">const</span> <span class="nx">privateKey</span> <span class="o">=</span> <span class="nx">ddpays</span><span class="p">.</span><span class="nx">PrivateKey</span><span class="p">.</span><span class="nx">fromString</span><span class="p">(</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'privateKey'</span><span class="p">).</span><span class="nx">value</span>
    <span class="p">);</span>
    <span class="c1">//get recipient</span>
    <span class="kr">const</span> <span class="nx">recipient</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'recipient'</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
    <span class="c1">//get comments</span>
    <span class="kr">const</span> <span class="nx">comments</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'comments'</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
    <span class="c1">//get transfer amount</span>
    <span class="kr">const</span> <span class="nx">quantity</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'quantity'</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
    <span class="c1">//get transfer type</span>
    <span class="kr">const</span> <span class="nx">type</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'type'</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
</code></pre>
</div>

<h4 id="3-object-creation">3. Object creation<a name="object"></a></h4>

<p>In the <code class="highlighter-rouge">broadcast.transfer</code> operation, the <code class="highlighter-rouge">amount</code> parameter is a combination of the transfer <code class="highlighter-rouge">value</code> and <code class="highlighter-rouge">type</code> which is why we concatenate the two values into a single variable. We then create a <code class="highlighter-rouge">transfer object</code> with the input variables to use within the broadcast operation.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">transfer</span> <span class="o">=</span> <span class="nx">quantity</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="s1">' '</span><span class="p">,</span> <span class="nx">type</span><span class="p">);</span>

<span class="c1">//create transfer object</span>
<span class="kr">const</span> <span class="nx">transf</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
<span class="nx">transf</span><span class="p">.</span><span class="nx">from</span> <span class="o">=</span> <span class="nx">username</span><span class="p">;</span>
<span class="nx">transf</span><span class="p">.</span><span class="nx">to</span> <span class="o">=</span> <span class="nx">recipient</span><span class="p">;</span>
<span class="nx">transf</span><span class="p">.</span><span class="nx">amount</span> <span class="o">=</span> <span class="nx">transfer</span><span class="p">;</span>
<span class="nx">transf</span><span class="p">.</span><span class="nx">memo</span> <span class="o">=</span> <span class="nx">comments</span><span class="p">;</span>
</code></pre>
</div>

<h4 id="4-broadcast">4. Broadcast<a name="broadcast"></a></h4>

<p>We can complete the <code class="highlighter-rouge">broadcast</code> operation using the created object and the private active key received from the input UI. The result of the transfer is displayed on the UI to confirm whether it was a success or an error occurred. The result is also displayed in the console with the relevant block number or transfer error.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nx">broadcast</span><span class="p">.</span><span class="nx">transfer</span><span class="p">(</span><span class="nx">transf</span><span class="p">,</span> <span class="nx">privateKey</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span>
    <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
            <span class="s1">'included in block: '</span> <span class="o">+</span> <span class="nx">result</span><span class="p">.</span><span class="nx">block_num</span><span class="p">,</span>
            <span class="s1">'expired: '</span> <span class="o">+</span> <span class="nx">result</span><span class="p">.</span><span class="nx">expired</span>
        <span class="p">);</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'transferResultContainer'</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span>
            <span class="s1">'flex'</span><span class="p">;</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'transferResult'</span><span class="p">).</span><span class="nx">className</span> <span class="o">=</span>
            <span class="s1">'form-control-plaintext alert alert-success'</span><span class="p">;</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'transferResult'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">'Success'</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'transferResultContainer'</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span>
            <span class="s1">'flex'</span><span class="p">;</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'transferResult'</span><span class="p">).</span><span class="nx">className</span> <span class="o">=</span>
            <span class="s1">'form-control-plaintext alert alert-danger'</span><span class="p">;</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'transferResult'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span>
            <span class="nx">error</span><span class="p">.</span><span class="nx">jse_shortmsg</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre>
</div>

<h3 id="to-run-this-tutorial">To run this tutorial</h3>

<ol>
  <li>clone this repo</li>
  <li><code class="highlighter-rouge">cd tutorials/20_transfer_dpay_and_bbd</code></li>
  <li><code class="highlighter-rouge">npm i</code></li>
  <li><code class="highlighter-rouge">npm run dev-server</code> or <code class="highlighter-rouge">npm run start</code></li>
  <li>After a few moments, the server should be running at http://localhost:3000/</li>
</ol>

<hr />

</section>

</div>
<div class="footer">
	<a href="#">Back to top</a>
</div>
<script>
    document.getElementById("open-nav").addEventListener("click", function () {
        document.body.classList.toggle("nav-open");
    });
</script>
</body>
</html>


<script src="/js/adjust.js"></script>

